{% extends 'CWBDataApp/base.html'%}

{% block title %} {{'Update Batch'}} {% endblock title %}

{% block css %}
  {% load static %}
  <link rel="stylesheet" type="text/css" href="{% static 'CWBDataApp/body.css'%}">
{% endblock %}

{% block content %}
      <div>
        <h2 id="header">Update  Batch</h2>
        <p id="descriptionParagraph">
          Update a batch that has already been entered
        </p>
      </div>

<div class="justify-content-center row no-gutters">

  <form action="{% url 'CWBDataApp:UpdateBatch'%}" method="post">
    <div class="d-inline-flex flex-column">
      <h4 id=header>Update Batch </h4>
      {% csrf_token %}
      <div class="inline-flex inputBox">
        <label for="batch">Choose Batch To Update: </label>
        <select id="batch" type="text" name="batch">
          <option value='None'>None</option>
          {% if allBatchs %}
            {% for batch in allBatchs %}
                <option value="{{ batch.batchname }}">{{batch.batchname}}</option>
            {% endfor %}
          {% endif %}
        </select>
      </div>

      <div class="inline-flex inputBox">
        <label for="batch2">Or Enter Batch Name: </label>
        <input id="batch2" type="text" name="batch2" maxlength="40">
      </div>
      <input type="submit" name="enterNewBatch" value="Submit">
    </div>
  </form>

    {% if batch %}
      <form action="{% url 'CWBDataApp:UpdateBatch'%}" method="post">
        <div class="d-inline-flex flex-column">
          {% csrf_token %}
          <div class="inline-flex inputBox">
            <label for="newbatch">Batch Name*: </label>
            <input id="newBatch" type="text" name="newBatch" maxlength="15" value="{{batch.batchname}}">
          </div>

          <div class="inline-flex inputBox">
            <label for="batchDate">Date*: </label>
            <input id="batchDate" type="date" name="batchDate" min="2021-01-01" value="{{batch.batchdate}}">
          </div>

          <div class="inline-flex inputBox">
            <label for="profile">Profile Used for Batch*: </label>
            <select id="profile" type="text" name="profile">
              <option value="{{ batch.profile }}">{{batch.profile}}</option>
              {% if allProfiles %}
                {% for entry in allProfiles %}
                    <option value="{{ entry.productname }}">{{entry.productname}}</option>
                {% endfor %}
              {% endif %}
            </select>
          </div>

          <div class="inline-flex inputBox">
            <label for="premix">Is this a Premix?: </label>
            <select id="premix" type="text" name="premix">
              <option value='No'>No</option>
              <option value="Yes">Yes</option>
            </select>
          </div>
          <br>

          {% for i in range %}
            <h4 id="header">Material {{i}} </h4>

            <div class="inline-flex inputBox">
              <label for="material{{i}}">Material Name*: </label>
              <select id="material{{i}}" type="text" name="material{{i}}">
                <option value="None">None</option>
                {% if allMaterials %}
                  {% for entry in allMaterials %}
                      <option value="{{ entry.materialname }}">{{entry.materialname}} ({{ entry.supplier.supplier }} {{entry.numberofboxes}} boxes)</option>
                  {% endfor %}
                {% endif %}
              </select>
            </div>

            <div class="inline-flex inputBox">
              <label for="material{{i}}2">Or Custom Material: </label>
              <input id="material{{i}}2" type="text" name="material{{i}}2" value="{{batch.material}}{{i}}" maxlength="40">
            </div>

            <div class="inline-flex inputBox">
              <label for="weight{{i}}">Weight {{i}}*: </label>
              <input id="weight{{i}}" type="number" name="weight{{i}}" {% if i == 1 %} value="1" min="1" {% else %} value="0" min="0"{% endif %}>
            </div>

            <div class="inline-flex inputBox">
              <label for="value{{i}}">Price/Pound: </label>
              <input id="value{{i}}" type="number" name="value{{i}}" value="0" step="any" min="0">
            </div>

            <div class="inline-flex inputBox">
              <label for="numofBoxes{{i}}">Number of Boxes: </label>
              <input id="numofBoxes{{i}}" type="number" name="numofBoxes{{i}}" value="1" step="0.5" min="1">
            </div>

            <br>
          {% endfor %}


          <h4 id="header"> Colour & Foam </h4>

          <div class="inline-flex inputBox">
            <label for="colour">Colour: </label>
            <select id="colour" type="text" name="colour">
              <option value="None"> </option>
              {% if allColours %}
                {% for entry in allColours %}
                    <option value="{{ entry.colour }}">{{ entry.colour }}</option>
                {% endfor %}
              {% endif %}
            </select>
          </div>

          <div class="inline-flex inputBox">
            <label for="colourWeight">Colour Weight: </label>
            <input id="colourWeight" type="number" name="colourWeight" value="0" step="any">
          </div>

          <div class="inline-flex inputBox">
            <label for="colourPrice">Colour Price/Pound: </label>
            <input id="colourPrice" type="number" name="colourPrice" value="0" step="any">
          </div>

          <br>

          <div class="inline-flex inputBox">
            <label for="foamWeight">Foam Weight: </label>
            <input id="foamWeight" type="number" name="foamWeight" value="0" step="any">
          </div>

          <div class="inline-flex inputBox">
            <label for="foamPrice">Foam Price/Pound: </label>
            <input id="foamPrice" type="number" name="foamPrice" value="6.75" step="any">
          </div>

          <div class="inline-flex inputBox">
            <label for="shredWeight">TotalShredWeight: </label>
            <input id="shredWeight" type="number" name="shredWeight" value="0">
          </div>

          <input type="submit" name="enterNewBatch" value="Submit">
        </div>
      </form>
    {% endif %}
</div>

{% endblock content %}
